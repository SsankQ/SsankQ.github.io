---
title: 02.09 TIL
author:
  name: SsankQ
date: 2022-02-09 19:00:00 +0800
categories: [TIL, 2022-02]
tags: [TIL]
render_with_liquid: false
---

### OAuth 인증

#### 인증 vs 인가
  - 인증 : 사용자가 유효한지 판단 (자격 증명) ex) JWT
  - 인가 : 어떤 권한을 획득할 수 있는지 결정 ex) OAuth

#### Github OAuth

> [Github OAuth guide](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps)

- Authorization Code를 받아오기 위해 Github에 보내는 요청 *(Request a user's GitHub identity)*

    ```jsx
    const axios = require('axios');

    // 1. URI에 직접 쿼리를 작성하는 방법 -> Promise 혹은 Async / await 방법으로 요청한 데이터를 확인할 수 있다
    axios.get('https://github.com/login/oauth?client_id=[ClientId]', {}, {
        headers: {
            accept: 'application/json' // application/vnd.github+json - 공식문서에서는 이 타입을 추천한다고 나와있다
        }
        // header 설정으로 타입에 대한 협상을 하지않으면 응답의 데이터가 문자열 형태로 오는 것으로 기본값이 설정되어 있다
    })

    // 2. params에 필요한 파라미터를 넣어 전달하는 방법
    axios.get('https://github.com/login/oauth', {
        client_id: [ClientId]
    }, {
        headers: {
            accept: 'application/json'
        }
    })
    ```

    > ***Content-Type 헤더와 Accept 헤더의 차이점***
    {: .prompt-note }

    - `Content-Type`  
        : 123
    - `Accept`  
        : 3425
        
    ---

- Authorization Code를 이용해 AccessToken을 받아오기 위한 요청


    ---

#### OAuth 로직 플로우

<img src="https://user-images.githubusercontent.com/89354370/153220127-a5b965e2-6897-46bd-81d8-5579db29b3fc.png" width=500px height=400px alt="OAuth flow">
*오늘도 이해를 위한 낙서(?)를 만들어보았다*

<img src="https://user-images.githubusercontent.com/89354370/153220408-40d0d963-d480-4f7a-9ba1-4e5d0b319136.png" width=700px height=600px alt="token flow">
*낙서 한장 추가요*

